<div [formGroup]="formGroup">
    <ng-container *ngFor="let field of config; let index = i">
        <div *ngIf="field.type === configInputType.SELECT">
            <sb-dropdown
                [formControlRef]="formGroup.get(field.code)"
                [label]="field.templateOptions.label"
                [context]="field.context ? formGroup.get(field.context) : null " 
                [default]="field.default"
                [placeHolder]="field?.templateOptions?.placeHolder" 
                [options]="field.templateOptions?.options">
            </sb-dropdown>
        </div>
        <div *ngIf="field.type === configInputType.NESTED_SELECT">
            <sb-dropdown 
                [formControlRef]="formGroup.get(field.code)" 
                [label]="field.templateOptions.label"
                [context]="field.context ? formGroup.get(field.context) : null "
                [default]="field.default"
                [placeHolder]="field?.templateOptions?.placeHolder"
                [options]="field.templateOptions?.options">
            </sb-dropdown>
        </div>
        <div *ngIf="field.type === configInputType.INPUT">
            <sb-textbox [label]="field.templateOptions.label" [placeholder]="field.templateOptions.placeHolder"
            [formControlRef]="formGroup.get(field.code)">
            </sb-textbox>
        </div>
        <div *ngIf="field.type === configInputType.CHECKBOX">
            <sb-checkbox [label]="field.code" [values]="field.templateOptions.labelHtml.values"></sb-checkbox>
        </div>
        <ng-container *ngIf="formGroup.get(field.code) as ref">
            <div *ngIf="ref && ref.value && field.context && field.children && field.children[ref.value]">
                <sb-form 
                [config]="field.children[ref.value]" 
                (valueChanges)="valueChanged($event)"
                (statusChanges)="statusChanged($event)" 
                (initialize)="onNestedFormInitialize($event, field.code)"
                ></sb-form>
            </div>
        </ng-container>
    </ng-container>
    <sb-textarea></sb-textarea>
</div>